<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toast App - API Documentation</title>
    <link rel="icon" href="assets/icons/icon.png">
    <link rel="stylesheet" href="styles.css">
    <meta name="description" content="Toast App internal API documentation - Interface definitions, methods, and usage examples.">
    <style>
        .documentation-container {
            max-width: 900px;
            margin: 7rem auto 0;
            padding: 2rem;
        }

        .api-section {
            margin-bottom: 4rem;
            padding-top: 1rem;
        }

        .api-section h2 {
            padding-bottom: 0.8rem;
            border-bottom: 1px solid var(--border-color);
            margin-top: 2rem;
            font-size: 1.8rem;
            color: var(--primary-color);
        }

        .api-section h3 {
            margin-top: 1.8rem;
            margin-bottom: 1rem;
            font-size: 1.4rem;
            color: var(--text-color);
        }

        .api-section h4 {
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
            font-size: 1.2rem;
            color: var(--text-color);
        }

        .api-section p {
            margin-bottom: 1.2rem;
            color: var(--text-light);
        }

        .api-section ul,
        .api-section ol {
            margin-left: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--text-light);
        }

        .api-section li {
            margin-bottom: 0.8rem;
        }

        .api-section code {
            background-color: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-size: 0.9rem;
            border: 1px solid var(--code-border);
        }

        .api-section pre {
            background-color: var(--code-bg);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            overflow-x: auto;
            margin-bottom: 2rem;
            border: 1px solid var(--code-border);
            position: relative;
        }

        .api-section pre::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 4px;
            background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
            border-radius: var(--border-radius) 0 0 var(--border-radius);
        }

        .return-home {
            display: inline-block;
            margin-bottom: 2rem;
        }

        .api-method {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 2.5rem;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
            transition: all var(--transition-speed) ease;
        }

        .api-method:hover {
            box-shadow: var(--card-hover-shadow);
        }

        .api-method-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }

        .api-method-name {
            flex-grow: 1;
            margin-top: 0;
            margin-bottom: 0;
            font-family: var(--font-code);
            font-size: 1.3rem;
        }

        .api-method-module {
            padding: 0.3rem 0.6rem;
            background-color: rgba(var(--primary-color-rgb), 0.1);
            color: var(--primary-color);
            font-size: 0.8rem;
            font-weight: 700;
            border-radius: 1rem;
            margin-left: 1rem;
            text-transform: uppercase;
        }

        .api-param-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
        }

        .api-param-table th {
            text-align: left;
            background-color: var(--bg-alt);
            padding: 0.7rem 1rem;
            font-weight: 600;
        }

        .api-param-table td {
            padding: 0.7rem 1rem;
            border-top: 1px solid var(--border-color);
            vertical-align: top;
        }

        .param-name {
            font-family: var(--font-code);
            color: var(--primary-color);
            font-weight: 500;
        }

        .param-type {
            font-family: var(--font-code);
            color: var(--secondary-color);
            font-size: 0.9rem;
        }

        .param-description {
            color: var(--text-light);
        }

        .param-required {
            background-color: rgba(var(--secondary-color-rgb), 0.1);
            color: var(--secondary-color);
            padding: 0.1rem 0.4rem;
            border-radius: 3px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .param-optional {
            background-color: rgba(var(--text-light-rgb), 0.1);
            color: var(--text-light);
            padding: 0.1rem 0.4rem;
            border-radius: 3px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .return-section {
            margin-top: 1.5rem;
        }

        .example-section {
            margin-top: 1.5rem;
        }

        .table-of-contents {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 3rem;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
            transition: all var(--transition-speed) ease;
        }

        .table-of-contents:hover {
            box-shadow: var(--card-hover-shadow);
        }

        .table-of-contents h2 {
            margin-top: 0;
            position: relative;
            padding-bottom: 10px;
        }

        .table-of-contents h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            width: 50px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        .table-of-contents ol {
            margin-bottom: 0;
            padding-left: 1.5rem;
        }

        .table-of-contents li {
            margin-bottom: 0.7rem;
        }

        .table-of-contents a {
            color: var(--primary-color);
            text-decoration: none;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .table-of-contents a:hover {
            color: var(--secondary-color);
            text-decoration: underline;
        }

        html {
            scroll-padding-top: 80px; /* Offset for fixed header */
        }

        /* Add custom CSS variables for colors that need RGB version for opacity */
        :root {
            --primary-color-rgb: 52, 152, 219;
            --secondary-color-rgb: 46, 204, 113;
            --text-light-rgb: 119, 119, 119;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text-light-rgb: 176, 176, 176;
            }
        }
    </style>
</head>
<body>
    <nav id="main-nav">
        <div class="nav-container container">
            <a href="index.html" class="nav-logo">
                <img src="assets/icons/icon.png" alt="Toast App Logo">
                <span>Toast App</span>
            </a>
            <button class="mobile-menu-btn" aria-label="Open Menu">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>
            <ul class="nav-links">
                <li><a href="#features">Features</a></li>
                <li><a href="#installation">Installation</a></li>
                <li><a href="#usage">Usage</a></li>
                <li><a href="#documentation">Documentation</a></li>
                <li><a href="https://github.com/opspresso/toast-app" target="_blank">GitHub</a></li>
            </ul>
        </div>
    </nav>

    <div class="documentation-container">
        <a href="index.html" class="return-home btn btn-outline">← Back to Home</a>

        <h1 class="fadeIn">Toast App API Documentation</h1>

        <p class="fadeIn delay-1">This document provides information about Toast App's internal structure and functionality. While primarily intended for developers who want to extend Toast App, this documentation can also help users understand how the application works.</p>

        <div class="table-of-contents">
            <h2>Table of Contents</h2>
            <ol>
                <li><a href="#introduction">Introduction</a></li>
                <li><a href="#config-module">Configuration Module</a></li>
                <li><a href="#executor-module">Executor Module</a></li>
                <li><a href="#shortcuts-module">Shortcuts Module</a></li>
                <li><a href="#tray-module">Tray Module</a></li>
                <li><a href="#windows-module">Windows Module</a></li>
                <li><a href="#action-modules">Action Modules</a></li>
                <li><a href="#data-structures">Data Structures</a></li>
                <li><a href="#error-handling">Error Handling</a></li>
                <li><a href="#platform-specifics">Platform-Specific Behaviors</a></li>
            </ol>
        </div>

        <div class="api-section" id="introduction">
            <h2>Introduction</h2>
            <p>Toast App is built on a modular architecture with clear separation between different components. This documentation explains how these components work together to provide the app's functionality.</p>

            <p>The app consists of several key modules:</p>
            <ul>
                <li><strong>Configuration Module:</strong> Manages all user settings and preferences</li>
                <li><strong>Executor Module:</strong> Handles execution of various actions (commands, URLs, shortcuts, scripts)</li>
                <li><strong>Shortcuts Module:</strong> Manages global keyboard shortcuts</li>
                <li><strong>Tray Module:</strong> Controls the system tray/menu bar icon</li>
                <li><strong>Windows Module:</strong> Manages application windows (Toast popup, Settings)</li>
                <li><strong>Action Modules:</strong> Specialized modules for each action type</li>
            </ul>

            <p>Understanding these modules can help you better use Toast App and troubleshoot any issues that may arise.</p>
        </div>

        <div class="api-section" id="config-module">
            <h2>Configuration Module</h2>
            <p>The Configuration Module handles how Toast App stores and manages your settings. All of your preferences, including button configurations, appearance settings, and other options, are managed by this module.</p>

            <h3>Configuration Structure</h3>
            <p>Your configuration is stored in a structured format that includes:</p>

            <div class="api-method">
                <div class="api-method-header">
                    <h3 class="api-method-name">Configuration Schema</h3>
                </div>
                <p>The primary configuration elements include:</p>

                <ul>
                    <li><strong>globalHotkey:</strong> Your keyboard shortcut to open Toast App (default: Alt+Space)</li>
                    <li><strong>pages:</strong> Collection of pages containing your buttons</li>
                    <li><strong>appearance:</strong> Visual settings including theme, position, size, opacity, and button layout</li>
                    <li><strong>advanced:</strong> Additional settings like launch at login, hiding behavior, etc.</li>
                    <li><strong>subscription:</strong> Subscription status and related settings</li>
                </ul>

                <div class="example-section">
                    <h4>Key Default Settings</h4>
<pre><code>// Default appearance settings
{
  theme: 'system',        // Options: 'light', 'dark', 'system'
  position: 'center',     // Options: 'center', 'top', 'bottom', 'cursor'
  size: 'medium',         // Options: 'small', 'medium', 'large'
  opacity: 0.95,          // Range: 0.1 to 1.0
  buttonLayout: 'grid'    // Options: 'grid', 'list'
}

// Default advanced settings
{
  launchAtLogin: false,   // Whether to start at login
  hideAfterAction: true,  // Whether to hide after executing an action
  hideOnBlur: true,       // Whether to hide when focus is lost
  hideOnEscape: true,     // Whether to hide when Escape is pressed
  showInTaskbar: false    // Whether to show in taskbar/dock
}</code></pre>
                </div>
            </div>

            <h3>Configuration Storage</h3>
            <p>Your settings are stored in:</p>
            <ul>
                <li><strong>macOS:</strong> <code>~/Library/Application Support/toast-app/config.json</code></li>
                <li><strong>Windows:</strong> <code>%APPDATA%\toast-app\config.json</code></li>
            </ul>
            <p>You can manually back up this file to save your configuration or transfer it to another computer.</p>
        </div>

        <div class="api-section" id="executor-module">
            <h2>Executor Module</h2>
            <p>The Executor Module is responsible for running actions when you click buttons. It determines what happens when you activate a button in Toast App.</p>

            <h3>Key Functions</h3>

            <div class="api-method">
                <div class="api-method-header">
                    <h3 class="api-method-name">Action Execution</h3>
                </div>
                <p>When you click a button, the executor:</p>
                <ol>
                    <li>Identifies the action type (command, URL, shortcut, script, or chain)</li>
                    <li>Validates the action parameters</li>
                    <li>Executes the appropriate action handler</li>
                    <li>Returns the result (success or failure)</li>
                </ol>

                <div class="example-section">
                    <h4>Supported Action Types</h4>
                    <ul>
                        <li><strong>exec:</strong> Runs a shell command on your computer</li>
                        <li><strong>open:</strong> Opens a URL, file, or folder</li>
                        <li><strong>shortcut:</strong> Simulates pressing a keyboard shortcut</li>
                        <li><strong>script:</strong> Runs a custom script in JavaScript, AppleScript, PowerShell, or Bash</li>
                        <li><strong>chain:</strong> Executes multiple actions in sequence</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="api-section" id="shortcuts-module">
            <h2>Shortcuts Module</h2>
            <p>The Shortcuts Module handles global keyboard shortcuts that work across your entire computer, not just within Toast App. The primary shortcut is the one that opens the Toast popup (default: Alt+Space).</p>

            <h3>Key Functions</h3>

            <div class="api-method">
                <div class="api-method-header">
                    <h3 class="api-method-name">Global Shortcut Management</h3>
                </div>
                <p>The shortcuts module provides:</p>
                <ul>
                    <li>Registration of global keyboard shortcuts</li>
                    <li>Toggling the Toast window visibility</li>
                    <li>Positioning the Toast window based on your settings</li>
                    <li>Handling shortcut registration conflicts</li>
                </ul>

                <div class="example-section">
                    <h4>Position Options</h4>
                    <ul>
                        <li><strong>center:</strong> Center of your screen</li>
                        <li><strong>top:</strong> Top center of your screen</li>
                        <li><strong>bottom:</strong> Bottom center of your screen</li>
                        <li><strong>cursor:</strong> Near your mouse cursor</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="api-section" id="tray-module">
            <h2>Tray Module</h2>
            <p>The Tray Module manages the system tray icon (Windows) or menu bar icon (macOS) that gives you quick access to Toast App functions.</p>

            <h3>Key Functions</h3>

            <div class="api-method">
                <div class="api-method-header">
                    <h3 class="api-method-name">Tray Icon & Menu</h3>
                </div>
                <p>The tray module provides:</p>
                <ul>
                    <li>Creating the system tray/menu bar icon</li>
                    <li>Building the context menu with app options</li>
                    <li>Handling menu item clicks</li>
                </ul>

                <div class="example-section">
                    <h4>Default Menu Options</h4>
                    <ul>
                        <li>Show Toast: Opens the Toast popup</li>
                        <li>Settings: Opens the settings window</li>
                        <li>Check for Updates: Checks for app updates</li>
                        <li>Quit: Exits the application</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="api-section" id="windows-module">
            <h2>Windows Module</h2>
            <p>The Windows Module manages application windows, including the Toast popup and the Settings window. It controls how these windows appear, behave, and respond to user interactions.</p>

            <h3>Key Functions</h3>

            <div class="api-method">
                <div class="api-method-header">
                    <h3 class="api-method-name">Window Management</h3>
                </div>
                <p>The windows module provides:</p>
                <ul>
                    <li>Creating the Toast popup and Settings windows</li>
                    <li>Setting up window event handlers</li>
                    <li>Showing and hiding windows</li>
                    <li>Applying your appearance settings</li>
                </ul>

                <div class="example-section">
                    <h4>Window Size Options</h4>
                    <ul>
                        <li><strong>small:</strong> 350x400 pixels</li>
                        <li><strong>medium:</strong> 400x500 pixels</li>
                        <li><strong>large:</strong> 500x600 pixels</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="api-section" id="action-modules">
            <h2>Action Modules</h2>
            <p>Toast App includes specialized modules for each type of action you can assign to buttons. These modules handle the specific requirements of different action types.</p>

            <h3>Exec Action</h3>
            <p>Executes shell commands on your computer.</p>
            <ul>
                <li><strong>Parameters:</strong>
                    <ul>
                        <li><code>command</code>: The shell command to execute</li>
                        <li><code>workingDir</code> (optional): The directory to run the command in</li>
                        <li><code>runInTerminal</code> (optional): Whether to run in a terminal window</li>
                    </ul>
                </li>
            </ul>

            <h3>Open Action</h3>
            <p>Opens URLs, files, and folders.</p>
            <ul>
                <li><strong>Parameters:</strong>
                    <ul>
                        <li><code>url</code> or <code>path</code>: The URL or file/folder path to open</li>
                        <li><code>application</code> (optional): Specific application to use for opening</li>
                    </ul>
                </li>
            </ul>

            <h3>Shortcut Action</h3>
            <p>Simulates keyboard shortcuts.</p>
            <ul>
                <li><strong>Parameters:</strong>
                    <ul>
                        <li><code>keys</code>: The keyboard shortcut to simulate (e.g., "Ctrl+C", "Alt+Tab")</li>
                    </ul>
                </li>
            </ul>

            <h3>Script Action</h3>
            <p>Executes custom scripts in various languages.</p>
            <ul>
                <li><strong>Parameters:</strong>
                    <ul>
                        <li><code>script</code>: The script content</li>
                        <li><code>scriptType</code>: Language (javascript, applescript, powershell, bash)</li>
                        <li><code>scriptParams</code> (optional): Parameters to pass to the script</li>
                    </ul>
                </li>
            </ul>

            <h3>Chain Action</h3>
            <p>Executes multiple actions in sequence.</p>
            <ul>
                <li><strong>Parameters:</strong>
                    <ul>
                        <li><code>actions</code>: Array of actions to execute in sequence</li>
                        <li><code>stopOnError</code> (optional): Whether to stop if an action fails</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="api-section" id="data-structures">
            <h2>Data Structures</h2>
            <p>Understanding the structure of pages and buttons can help you customize Toast App more effectively.</p>

            <h3>Page Structure</h3>
            <div class="example-section">
<pre><code>{
  name: "Applications",       // Display name of the page
  shortcut: "1",              // Keyboard shortcut to access the page (1-9)
  buttons: [                  // Array of button objects
    // Button objects go here
  ]
}</code></pre>
            </div>

            <h3>Button Structure</h3>
            <div class="example-section">
<pre><code>{
  name: "Terminal",           // Display name of the button
  shortcut: "T",              // Keyboard shortcut (single character)
  icon: "⌨️",                 // Emoji or icon
  action: "exec",             // Action type (exec, open, shortcut, script, chain)

  // Additional properties based on action type:
  command: "open -a Terminal", // For exec action
  url: "https://example.com",  // For open action
  keys: "Ctrl+C",              // For shortcut action
  script: "console.log('Hello');", // For script action
  scriptType: "javascript",    // For script action
  actions: [],                 // For chain action (array of actions)
  stopOnError: true            // For chain action
}</code></pre>
            </div>
        </div>

        <div class="api-section" id="error-handling">
            <h2>Error Handling</h2>
            <p>Toast App includes robust error handling to ensure that problems with one button or action don't affect the entire application.</p>

            <h3>Error Response Structure</h3>
            <p>When an action fails, Toast App provides a structured error message that includes:</p>
            <ul>
                <li>Success indicator (false in case of errors)</li>
                <li>User-friendly error message</li>
                <li>Detailed error information (for troubleshooting)</li>
            </ul>

            <h3>Common Error Scenarios</h3>
            <ul>
                <li><strong>Command Execution Errors:</strong> Invalid commands, permission issues, or command not found</li>
                <li><strong>URL Opening Errors:</strong> Invalid URLs, network issues, or missing applications</li>
                <li><strong>Shortcut Errors:</strong> Invalid shortcut formats or unsupported key combinations</li>
                <li><strong>Script Errors:</strong> Syntax errors, runtime errors, or unsupported script types</li>
                <li><strong>Chain Action Errors:</strong> Errors in individual actions within the chain</li>
            </ul>

            <p>When you encounter errors, check the error message for specific guidance on how to fix the issue.</p>
        </div>

        <div class="api-section" id="platform-specifics">
            <h2>Platform-Specific Behaviors</h2>
            <p>Toast App works on both macOS and Windows, but there are some platform-specific behaviors to be aware of.</p>

            <h3>macOS Specifics</h3>
            <ul>
                <li><strong>Menu Bar Integration:</strong> Uses macOS menu bar instead of system tray</li>
                <li><strong>AppleScript Support:</strong> Allows execution of AppleScript in custom script buttons</li>
                <li><strong>Keyboard Modifiers:</strong> Uses Command (⌘) instead of Ctrl for keyboard shortcuts</li>
                <li><strong>File Paths:</strong> Uses Unix-style paths with forward slashes (/)</li>
            </ul>

            <h3>Windows Specifics</h3>
            <ul>
                <li><strong>System Tray:</strong> Uses Windows system tray for the application icon</li>
                <li><strong>PowerShell Support:</strong> Allows execution of PowerShell scripts</li>
                <li><strong>Keyboard Modifiers:</strong> Uses Ctrl instead of Command for keyboard shortcuts</li>
                <li><strong>File Paths:</strong> Uses Windows-style paths with backslashes (\)</li>
            </ul>

            <p>Toast App automatically adapts to the platform you're using, so you generally don't need to worry about these differences. However, they're important to know if you're creating complex buttons or scripts.</p>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 Toast App. MIT License.</p>
            <ul class="footer-links">
                <li><a href="https://github.com/opspresso/toast-app" target="_blank">GitHub</a></li>
                <li><a href="CONTRIBUTING.html">Contributing</a></li>
                <li><a href="CODE_OF_CONDUCT.html">Code of Conduct</a></li>
                <li><a href="SECURITY.html">Security</a></li>
            </ul>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const navLinks = document.querySelector('.nav-links');

            mobileMenuBtn.addEventListener('click', function() {
                navLinks.classList.toggle('active');
            });

            // Navigation scroll effect
            const nav = document.getElementById('main-nav');

            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    nav.classList.add('nav-scrolled');
                } else {
                    nav.classList.remove('nav-scrolled');
                }
            });

            // Smooth scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();

                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;

                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });

                        // Close mobile menu if it's open
                        if (navLinks.classList.contains('active')) {
                            navLinks.classList.remove('active');
                        }
                    }
                });
            });

            // Simple animation for the content
            document.querySelectorAll('.api-section').forEach((element, index) => {
                element.classList.add('fadeIn');
                element.style.animationDelay = `${index * 0.1}s`;
            });
        });
    </script>
</body>
</html>
